<!-- index.html -->

<!DOCTYPE html>

<html> 
  <head> 
        <meta charset="utf-8"> 
        <title>HelloWorld</title> 
  </head> 
    <body>
		<center>
		<meta charset="utf-8">
        <b><h1>铁道学院</h1></b>
		<pre id="file"></pre>
		<p></p>
		<input id = "next" type="button" value="下一时刻" onclick="create_button()" />
		<p></p>
		<p> 当前时间 </p>
		<p id = "time"></p>
		<canvas id="myCanvas" width="1203" height="639" style="border:1px solid #d3d3d3;background:#ffffff;">
		Your browser does not support the HTML5 canvas tag.
		</canvas>
		</center>
		
		
        <script>
		var RailQos = new Array(10,8,5,3,2,4,4,6,8,6,5,7,5,7,8,5,8,9,7,8,6,5,8,5);
		var CSUQos = new Array(8,5,2,2,3,4,5,3,6,7,4,9,7,10,2,3,4,6,4,8,7,6,8,7);
		var Canvas; var cxt; var map;
		var StartTime = 1466870529255;
		window.onload=function(){
			Canvas=document.getElementById("myCanvas");
			cxt=Canvas.getContext("2d");
			map = new Image();
			map.onload = function () {
				cxt.drawImage(map,0,0);
			};
			map.src="../static/map960400.png";	
		};
		var counter = 0;var time = 1466870400000;var color = 0;
		function create_button(){
			counter += 1;
			cxt.drawImage(map,0,0);
			if (counter > 24){
				counter = 0;
				time = 1466870400000;
			}
			if(RailQos[counter] / 10 > 0.5){
				var Rs = 'rgba(255,0,0, ' + (RailQos[counter] / 10 - 0.3) + ')';
			}else{
				var Rs = 'rgba(0,255,0, ' + (RailQos[counter] / 10) + ')';
			}
			if(CSUQos[counter] / 10 > 0.5){
				var Cs = 'rgba(255,0,0 ' + (RailQos[counter] / 10 - 0.3) + ')';
			}else{
				var Cs = 'rgba(0,255,0 ' + (RailQos[counter] / 10) + ')';
			}
			cxt.beginPath();
			cxt.arc(960,400,100,0,Math.PI * 2,true);
			cxt.closePath();
			cxt.fillStyle = Rs;
			cxt.fill();
			cxt.beginPath();
			cxt.arc(200,100,100,0,Math.PI * 2,true);
			cxt.closePath();
			cxt.fillStyle = Cs;
			cxt.fill();
			
			var newDate = new Date();
			newDate.setTime(time);
			document.getElementById("time").innerHTML = newDate.toString();
			time += 3600000;
			return newDate.toString();
			/*
			var RealTime = "2016-06-26 00:00:00"
			var timestamp = Date.parse(new Date(RealTime));
			console.log(timestamp);
			var newDate = new Date();
			newDate.setTime(timestamp);
			console.log(newDate.toString());
			var RealTime = "2016-06-26 01:00:00"
			var timestamp = Date.parse(new Date(RealTime));
			console.log(timestamp);
			var newDate = new Date();
			newDate.setTime(timestamp);
			console.log(newDate.toString());
			*/
		}
        </script> 
    </body> 
</html>


<!--
<!DOCTYPE html>
<html>
<body>

<p>要使用的图像：</p>
<img id="tulip" src="../static/map960400.png" alt="The Tulip" />

<p>画布：</p>
<canvas id="myCanvas" width="500" height="300" style="border:1px solid #d3d3d3;background:#ffffff;">
Your browser does not support the HTML5 canvas tag.
</canvas>

<script>

window.onload=function(){
    var Canvas=document.getElementById("myCanvas");
    var cxt=Canvas.getContext("2d");
    var bg=new Image();
    //先指定一个回调函数，图片加载好之后自然会回来执行
    bg.onload = function () {
        cxt.drawImage(bg00);
    };
    //加载图片，完成后执行刚才的函数
    bg.src="../static/map960400.png";
};

</script>

</body>
</html>
-->


